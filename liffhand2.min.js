!function(){var storeA={liffId:"",os:"",redirectUri:""},GetP=(s=location.search,rt={},-1!=s.indexOf("?")&&(aryParam=s.split("?")[1].split("&")).map((function(tmpA){tmpParam=tmpA.split("="),rt[tmpParam[0]]=decodeURIComponent(tmpParam[1])})),rt),s,aryParam,tmpParam,rt;if(!window.liff)return console.log("No window.liff detected or you need load this file after liff sdk.js cdn."),alert("No window.liff detected."),!1;var hand={liff_hash:location.hash,store:storeA,profile:{},data:{},isInWeb:!1,path:GetP.hashpath,delay:GetP.liffhanddelay,debug:!!GetP.liffhanddebug,changeHash:function(){if(!hand.path)return!1;hand.delay=parseInt(hand.delay),isNaN(hand.delay)&&(hand.delay=0,hand.debug&&console.log("Your delay is not a number so liffhand will set value as 0.")),hand.delay?setTimeout((function(){location.hash=hand.path}),hand.delay):location.hash=hand.path},getProfile:function(cbFn){liff.getProfile().then((function(c){hand.profile=c,"function"==typeof cbFn&&cbFn(c)})).catch((function(c){"function"==typeof cbFn&&cbFn(c)}))},getLSToken:function(){return localStorage.getItem("LIFF_STORE:"+storeA.liffId+":accessToken")},removeLSToken:function(){localStorage.removeItem("LIFF_STORE:"+storeA.liffId+":accessToken")},getWebURL:function(){var searchAry=[];for(var k in GetP)/^code$|^liffClientId$|^liffRedirectUri$|^state$/.test(k)||searchAry.push(k+"="+encodeURIComponent(GetP[k]));var searchStr=searchAry.join("&");return""!=searchStr&&(searchStr="?"+searchStr),location.protocol+"//"+location.host+location.pathname+searchStr+location.hash},makeURL:function(url){var urlState={search:/\?/.test(url),hash:/\#/.test(url)},objA={path:"",search:"",hash:""},tmpA,link="";return urlState.search?(objA.path=url.split("?")[0],tmpA=url.split("?")[1],urlState.hash?(objA.search="?"+tmpA.split("#")[0],objA.hash="#"+tmpA.split("#")[1]):objA.search="?"+tmpA):(objA.path=url.split("#")[0],urlState.hash&&(objA.hash="#"+url.split("#")[1])),urlState.hash?(tmpA=urlState.search?objA.search+"&hashpath="+encodeURIComponent(objA.hash):"?hashpath="+encodeURIComponent(objA.hash),link=objA.path+tmpA+hand.liff_hash):link=url+hand.liff_hash,{state:urlState,data:objA,original:url,url:link}},goto:function(url){location.href=hand.makeURL(url).url},login:function(){var cfg=arguments[0]||{redirectUri:hand.getWebURL()};window.liff.login(cfg)},regData:function(cfg){if("object"==typeof cfg)for(var k in cfg)storeA[k]=cfg[k]},initAll:function(successFn,errorFn,liffCfg,regesterConfig){void 0===liffCfg?liff.init((function(data){hand.data=data;var initThis=this,r=arguments;hand.getProfile((function(pFile){hand.profile=pFile,"function"==typeof successFn&&successFn.apply(initThis,r)})),hand.isInWeb=!("web"!=liff.getOS())}),(function(){"function"==typeof errorFn&&successFn.apply(this,arguments)})):(/\&/.test(location.hash)&&!/^\#\/context_token/.test(location.hash)&&(location.hash=location.hash.split("&/")[0]),"string"==typeof liffCfg&&(liffCfg={liffId:liffCfg}),liff.init(liffCfg,(function(data){if(storeA.liffId=liffCfg.liffId,storeA.os=liff.getOS(),hand.regData(regesterConfig),"web"!=storeA.os||GetP.code||hand.getLSToken()||GetP.liffClientId||!storeA.autoLogin&&!GetP.liffHandAutoLogin){hand.data=data;var initThis=this,r=arguments;hand.getProfile((function(pFile){hand.profile=pFile,"function"==typeof successFn&&successFn.apply(initThis,r)})),hand.isInWeb=!("web"!=liff.getOS())}else hand.login()}),(function(){"function"==typeof errorFn&&errorFn.apply(this,arguments)})))}};window.liff.$hand=hand,window.liffHand=hand}();
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="zh-TW" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width; initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
<title>LIFF ÂØ´Êò•ËÅØÊäΩÁ•ùÁ¶è</title>
<style>
html {
    font-size: 10vw;
}
body {
	font-size: 0.5rem;
	margin: 0px 2vw;
    background-color: #e9e4c9;
}
.textA {
    font-size: 0.5rem;
    line-height: 0.63rem;
    color: #7c4804;
}
.textB {
    font-size: 0.4rem;
    line-height: 0.5rem;
    color: #0B4E75;
}
.textC, .textC1, .textC2 {
    font-size: 0.32rem;
    line-height: 0.4rem;
    min-height: 0.4rem;
    color: #a02421;
}
.textC1 {
    color: #666;
}
.textC2 {
    color: #1c814b;
}
.textError1 {
    font-size: 0.38rem;
    line-height: 0.42rem;
    color: #F23;
}
.switchagg{
    display: inline-block;
    line-height: 1rem;
}
.springKey{
    border: 1px solid #A29116;
    box-sizing: border-box;
    padding: 0.2rem;
}
.spInput{
    width: 80%;
    padding: 2px;
    font-size: 0.5rem;
}

/* ÂàáÊèõÈñãÈóú */
.btnSwitch{
    position: relative;
    height: 1rem;
    width: 1.7rem;
    background-color: #FFF;
    box-sizing: border-box;
    border: 0.1rem solid #0acc2e;
    border-radius: 0.5rem;
}
.btnSwitch.off{
    border: 0.1rem solid #6f7470;
}
.btnSwitch .toggle{
    position: absolute;
    top: 0.05rem;
    left: 0.05rem;
    height: 0.7rem;
    width: 0.7rem;
    box-sizing: border-box;
    border-radius: 0.8rem;
    background-color: #0acc2e;
}
.btnSwitch.off .toggle{
    left: auto;
    right: 0.05rem;
    background-color: #6f7470;
}

.btnType1, .btnType2, .btnType3, .btnType3A, .btnType5{
    box-sizing: border-box;
    border-radius: 0.5rem;
    border: 0.1rem solid #092168;
    background-color: #092168;
    color: #efefef;
    cursor: pointer;
    text-align: center;
    padding: 0.2rem;
    margin: 0.2rem 0;
    font-size: 0.5rem;
}
.btnType2 {
    background-color:#dd3b0a;
    border-color:#dd3b0a;
}
.btnType3{
    display: inline-block;
    background-color: #d3b73b;
    color: #333;
    border-color: #333;
}
.btnType3A{
    display: inline-block;
    background-color: #333;
    color: #d3b73b;
    border-color: #333;
}
.btnType5{
    background-color: #fa0808;
    color: #ffd700;
    border-color: #ffd700;
}
.inBlk{display: inline-block;}
.fLeft{float: left;}

.bgST{
    background-color: #F02323;
}
.fontST{
    font-size: 0.66rem;
}
.h3CSS{
    line-height: 0.8rem;
    height: 0.82rem;
    text-align: center;
    letter-spacing: 0.5rem;
}
.h2CSS{
    width: 1.3rem;
    text-align: center;
    padding: 1rem 0;
}
.color_black{color:#111;}
.color_gold{color:#ffd700;}

/* Popup */
#pop{
    position: fixed;
    display: none;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    z-index: 1000;
    top: 0;
    left: 0;
    opacity: 1;
    transition: opacity 1s ease;
}
#pop.show{
    display: block;
}

#pop .bg1{
    background-color: rgba(88,88,88,0.6);
    z-index: 1002;
    position: absolute;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
}
#pop .text{
    color: #f2f2f2;
    text-align: center;
}
#pop .out{
    background-color: #3456ba;
    box-sizing: border-box;
    border: 0.1rem solid #234589;
    padding: 0.4rem 0.2rem;
    margin: 0;
    position: absolute;
    top:50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1004;
    min-width: 7rem;
}
#pop .bottomArea{
    background-color: #3456ba;
    box-sizing: border-box;
    position: absolute;
    bottom: 0;
    height: 1.2rem;
    padding: 0.2rem 0;
    z-index: 1003;
    width: 100vw;
}
#pop .btnOfMsg{
    box-sizing: border-box;
    display: inline-block;
    border-radius: 0.3rem;
    color: #fefefe;
    background-color: #234589;
    margin: 0 0.3rem;
    padding: 0.1rem 0.2rem;
    font-size: 0.5rem;
}

@media screen and  (orientation: portrait) {
    #pop .bottomArea{
        height: 2.2rem;
        padding-top: 0.4rem;
    }
    #pop .btnOfMsg{
        font-size: 0.6rem;
        padding: 0.2rem 0.4rem;
    }
}

.no_under{
    text-decoration: none;
}

@keyframes fcopmove{
    from{ color:rgb(65, 6, 26);}
    to{color:red;}
}
.fcopAni{
    background: rgba(251,251,251,0.1);
    animation: fcopmove 2s infinite;
    -webkit-animation: fcopmove 2s infinite;
}  

</style>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue-router@2.7.0/dist/vue-router.js"></script>
<script type="text/javascript" src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
<!--<script type="text/javascript" src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>-->
<script type="text/javascript" src="https://melixapi.000webhostapp.com/linebotGroupBuy/liff/pmsg.js"></script>
<!--<script type="text/javascript" src="https://melixyen.github.io/liff-hand/liffhand2.js"></script>-->
<!--<script src="https://cdn.bootcss.com/vConsole/3.2.0/vconsole.min.js"></script>-->
<script src="./clean000.js"></script>

<script type="text/javascript">
//   var vConsole = new VConsole();
Vue.config.productionTip = false;

var liffParam = localStorage.getItem('LIFF_PARAM');
var GetP = (function(){
        var s = location.search, aryParam, tmpParam, rt = {};
        if(s.indexOf('?')!=-1){
            aryParam = s.split('?')[1].split('&');
            aryParam.map(function(tmpA){
                tmpParam = tmpA.split('=');
                rt[tmpParam[0]] = decodeURIComponent(tmpParam[1]);
            });
            if(liffParam && rt['code']){
                var objLiffParam = JSON.parse(liffParam);
                for(var k in objLiffParam){
                    if(!rt[k]) rt[k] = objLiffParam[k];
                }
            }
            localStorage.setItem('LIFF_PARAM', JSON.stringify(rt));
        }
        return rt;
})();

var GB = {
    ac: GetP.ac,
    profile: {
        displayName: 'Â∞èÊòéüîÄ',
        pictureUrl: 'https://i.imgur.com/eGWaGSg.jpg',
        userId: 'Kde49ee52b3ea232fbe032e440c8bedc5'
    },
    sendRoomAD: function(h1, h2, h3, L2R, color, editURL, lotURL){
        var fc = (color=='gold') ? '#ffd700' : '#111111';
        var aryH1 = h1.split('');
        var aryH2 = h2.split('');
        var aryH3 = (!!h3) ? h3.split('') : [];
        if(!L2R){ aryH3.reverse(); }
        var aryContent = [];
        if(aryH3.length>0){
            aryH3 = aryH3.map(function(word){
                return {
                    "type": "text", "text": word, "wrap": true, "color": fc, "align": "center",
                    "size": "xxl", "weight": "bold",
                    "flex": 1
                }
            })
            var h3Obj = {
                    "type": "box",
                    "layout": "baseline",
                    "spacing": "sm",
                    "backgroundColor": "#fd2323",
                    "contents": aryH3
            }
            aryContent.push(h3Obj);
        }

        var h12Separator = {
            "type": "box",
            "layout": "vertical",
            "margin": "xxl",
            "spacing": "sm",
            "backgroundColor": "#8c5020",
            "contents": [
                { "type": "text", "text": "\n", "wrap": true, "weight": "bold", "color": "#100010", "size": "xxl" }
            ]
        }
        var h12SeparatorA = {
            "type": "box",
            "layout": "vertical",
            "margin": "sm",
            "spacing": "sm",
            "backgroundColor": "#8c5020",
            "contents": [
                { "type": "text", "text": "\n", "wrap": true, "weight": "bold", "color": "#100010", "size": "xxl" }
            ]
        }

        var wordH1 = aryH1.join('\n'), wordH2 = aryH2.join('\n');
        if(!L2R){
            wordH1 = aryH2.join('\n'); wordH2 = aryH1.join('\n');
        }

        function makeH12Obj(wordS, colorS){
            return {
                "type": "box", "layout": "vertical", "margin": "xxl", "spacing": "sm",
                "backgroundColor": "#fd2323",
                "contents": [
                    {
                        "type": "text",
                        "text": wordS,
                        "wrap": true,
                        "align": "center",
                        "weight": "bold",
                        "color": colorS,
                        "size": "xxl"
                    }
                ]
            }
        }

        var h12Obj =  {
            "type": "box",
            "layout": "horizontal",
            "margin": "xxl",
            "spacing": "sm",
            "contents": [
                makeH12Obj(wordH1, fc),
                h12Separator,
                h12SeparatorA,
                makeH12Obj(wordH2, fc),
            ]
        }
        aryContent.push(h12Obj);

        if(lotURL){
            var lotBtnObj = {
                "type": "box", "layout": "horizontal", "margin": "xxl", "spacing": "sm",
                "contents": [{
                    "type": "button",
                    "style": "primary",
                    "color": "#cca840",
                    "action": {
                        "type": "uri",
                        "label": "ÊâìÈñãÁ•ùÁ¶èÔºèÁ¥ÖÂåÖ",
                        "uri": lotURL
                    }
                }]
            }
            aryContent.push(lotBtnObj);
        }
        
        var msgObj = {
            "type": "bubble",
            "styles": { "footer": { "separator": true } },
            "body": {
                "type": "box",
                "layout": "vertical",
                "contents": aryContent
            },
            "footer": {
                "type": "box",
                "layout": "vertical",
                "spacing": "sm",
                "contents": [
                {
                    "type": "button",
                    "style": "link",
                    "height": "sm",
                    "action": {
                    "type": "uri",
                    "label": "ËΩâÁôºÊò•ËÅØÈÄ£Áµê",
                    "uri": editURL
                    }
                },
                {
                    "type": "button",
                    "style": "link",
                    "height": "sm",
                    "action": {
                    "type": "uri",
                    "label": "ÊàëË¶ÅÂØ´Êñ∞ÁöÑÊò•ËÅØ",
                    "uri": SERVER_URL_PATH
                    }
                },
                {
                    "type": "spacer",
                    "size": "sm"
                }
                ],
                "flex": 0
            }
        }
        var a = liff.sendMessages([{
            type: "flex",
            altText: h1 + '\n' + h2,
            contents: msgObj
        }]).then(function(e){
        });
        pmsg.tip('Ê≠£Âú®Âπ´‰Ω†Ë≤ºÊò•ËÅØÂà∞ËÅäÂ§©ÂÆ§');
        return msgObj;
    }
}

var ytbURL = 'https://youtu.be/ozvUvTEBMnA';
var qrcodeURL = 'https://i.imgur.com/Crhr2jF.png';
//https://melixapi.000webhostapp.com/linebotPKuma/spt.html
// var SERVER_URL_PATH = 'https://liff.line.me/1653774878-bqoNoYlE/linebotPKuma/spt.html';
var SERVER_URL_PATH = 'line://app/1653774878-bqoNoYlE';
var aryExample = [
    ['Â§©Â¢ûÊ≠≤Êúà‰∫∫Â¢ûÂ£Ω','Êò•Êªø‰πæÂù§Á¶èÊªøÂ†Ç','Âπ¥Âπ¥ÊúâÈ§ò'],
    ['Â§©Â∞áÂåñÊó•ËàíÊ∏ÖÊôØ','ÂÆ§ÊúâÊò•È¢®ËÅöÂ§™Âíå','ÂõõÂ≠£Âπ≥ÂÆâ'],
    ['‰∏âÊò•Ê∑ëÊ∞£ÁõàÈñÄÂÆ§','Ëê¨ÈáåÁ••ÂÖâÊªøÊñóÊñá','ÁôæÂπ¥‰∫ãÊ•≠Á¥πÁÆïË£ò'],
    ['ÂÆ∂Á••‰∏ñË°çÁÑ°ÁñÜÊÖ∂','ÂúãÊ≥∞Â§©Èñã‰∏çËÄÅÊò•','Êà∂Á¥çÊò•È¢®ÂêâÊÖ∂Â§ö'],
    ['ÁëûÊó•ËäùËò≠ÂÖâÁî≤Á¨¨','Êò•È¢®Ê£†Ê££ÊåØÂÆ∂ËÅ≤','‰∏Ä‰ª£ÁÆïË£ò‰∏ñÊ•≠Èï∑'],
    ['‰∫îËâ≤Èõ≤‰∏≠ÈñãÊõâÊó•','Ëê¨Âπ¥Êûù‰∏äÂãïÊò•È¢®','‰∏ÄÈÅìÁ••ÂÖâÈ®∞ÂêâÂÆá'],
    ['‰∏âÈôΩÊó•ÁÖßÂπ≥ÂÆâÂú∞','‰∫îÁ¶èÊòüËá®ÂêâÊÖ∂ÂÆ∂','ÂõõÂ≠£Âπ≥ÂÆâ'],
    ['ÊùæÁ´πÊ¢ÖÊ≠≤ÂØí‰∏âÂèã','Ê°ÉÊùéÊùèÊò•È¢®‰∏ÄÂÆ∂','Ê§øËê±‰∏¶ËåÇ'],
    ['Êò•Â§èÁßãÂÜ¨ÈõÜÂçÉÁ••','Êù±ÂçóË•øÂåóËøéÁôæÁ¶è','Âπ¥Âπ¥ÊúâÈ§ò'],
    ['Èº†Èå¢Èº†Êàø‰∏çÈº†ÂÇµÂãôË°®','Ë≤™ÂêÉË≤™Âñù‰∏çË≤™Â∞è‰æøÂÆú','ÊÜëËâØÂøÉÈº†ÈàîÁ•®'],
    ['Ë´ñÊñáÂ∞àÈ°åËºïÈ¨ÜÈÅé','Ê∫ñÊôÇÁï¢Ê•≠‰∏çÁïôÁ¥ö','ÊïôÊéàÊîæ‰∫∫'],
    ['Èº†ÈàîÁ•®Èº†Âà∞ÊâãËªü','Áù°Â§ßË¶∫Áù°Âà∞ÈªÉÊòè','È†≠ÂΩ©‰æÜ‰∏ÄÂºµ'],
    ['Êó•Âá∫Âî∏Êõ∏Ë¶ãÊúàÊ≠¢','Èº†‰∏ÄÈº†‰∫åÂ•ΩÊàêÁ∏æ','Âä™ÂäõÁî®Âäü'],
    ['ËÅ∑‰ΩçÂçáÂà∞Â§öÂÄãÁêÜ','Ëñ™Ê∞¥Èº†Âà∞Â§öÂÄãÈõ∂','Â∑•‰ΩúÈ†ÜÂà©'],
    ['ÁúãÊàøËµ∞Ë∑ØÂà∞ËÖøËªü','‰πòËªäÈº†‰∫ÜÂ•ΩÂ§öÁ´ô','ÈÉäÂçÄÂëΩ'],
    ['ÂÅ•Â∫∑Ê™¢Êü•ÁÑ°Á¥ÖÂ≠ó','ÈÅøËªäÊúõË∑ØÂπ≥ÂÆâË°å','Èº†Âπ¥Ë∫´Â£Ø'],
    ['Ëº∏Âà∞ÊÜÇÊôÇÊñπÊÅ®Â∞ë','ÁøªÊú¨Ë®òÂæóÂ∏∂Â§†Èå¢','‰πùËº∏Ë≥≠‰∏ÄË¥è'],
    ['‰∏âÂàÜËàî‰∏ãËÉÉÈº†ÁÑ°','ÂñòÂá∫Â§ßÊ∞£ÊâçÂè´ÂÅú','ÈÅéÂπ¥ÂêÉÂà∞È£Ω'],
    ['ÂçáËÅ∑Âä†Ëñ™ÊîæÈï∑ÂÅá','ÊóÖË°åË≥ºÁâ©ÂêÉÂ§ßÈ§ê','ÊéßÂà∂È´îÈáç'],
    ['Ë¶™Âèã‰∏ÄÊâãÈº†ÁöÑÁõ°','ÈÅéÂπ¥‰∏çÁî®ÁôºÁ¥ÖÂåÖ','ÈÇäÁ∑£‰∫∫Áîü'],
    ['Â∑•‰ΩúÁãÄÊ≥ÅËé´ÂÜçÂïè','ÁµêÂ©ö‰πã‰∫ãËé´ÂÜçÊèê','ÈñÉÈÅøÈªûÊªø'],
    ['Êò•Êó•Âá∫ÈÅäÁæ§Ëä±Ëâ∑','Êº´Êº´Ê≠∏ÈÄîÈº†ËªäÁáà','Â°ûËªä‰πüË¶ÅÁé©'],
    ['Èº†Âê±‰∏çÁõ°ÁöÑË≤°ÂØå','Áî®‰πã‰∏çÁ´≠ÁöÑÂÅ•Â∫∑','Âπ≥ÂÆâÂØåË≤¥']
];
function lotteryExample(){
    var len = aryExample.length;
    var idx = Math.floor(Math.random() * len);
    return aryExample[idx];
}

function str2Int(uid){
    
    var aryUID = uid.split('');
    var ascTotal = 0;
    aryUID.map(function(w){
        ascTotal += w.charCodeAt();
    })
    var idx = ascTotal % 4;
    console.log('ascTotal:' + ascTotal + ' , ' + idx);
}

function initVue(){
    
    var indexArea = {
        template: `<div>
            <div style="margin:2rem 0;" v-if="flagShowPushRoomBtn">
                <div class="btnType5" v-on:click="pushRoom">Âπ´ËÅäÂ§©ÂÆ§ÈñÄË≤ºÊò•ËÅØ</div>
                <div style="visibility:hidden;"><textarea>{{roomMsgJSON}}</textarea></div>
                <div class="btnType2" v-on:click="copyGenFn()">Ë§áË£ΩÊò•ËÅØÈÄ£Áµê</div>
            </div>
            <div>
                <a href="https://youtu.be/ozvUvTEBMnA" target="_blank" class="no_under"><div class="btnType5">ÊïôÂ≠∏ÂΩ±Áâá(Â∞áÈÄ£Âà∞ Youtube)</div></a>
            </div>
            <div class="textB" v-if="!flagShowPushRoomBtn">Âø´‰æÜÂØ´‰Ω†ÁöÑÂ∞àÂ±¨Â∞çËÅØÂÜçË§áË£ΩÊò•ËÅØÁ∂≤ÂùÄË≤ºÂà∞ÂÖ∂‰ªñËÅäÂ§©ÂÆ§ÂæåÈªûÈñãÂü∑Ë°å[Ë≤ºÊò•ËÅØ]„ÄÇ</div>
            <div class="textB" v-if="flagShowPushRoomBtn">Ë¶ÅÁ∑®ËºØÊ≠§Êò•ËÅØË´ãÂú®‰∏ãÊñπ‰øÆÊîπ</div>
            <div class="springKey">
                <div>
                    <div v-bind:class="cssFL2RBtn(false)" v-on:click="L2R=false">Áî±Âè≥Ëá≥Â∑¶</div>
                    <div v-bind:class="cssFL2RBtn(true)" v-on:click="L2R=true">Áî±Â∑¶Ëá≥Âè≥</div>
                </div>
                <div>
                    <div v-bind:class="cssFontColorBtn('black')" v-on:click="fc='black'">ÈªëËâ≤Â≠ó</div>
                    <div v-bind:class="cssFontColorBtn('gold')" v-on:click="fc='gold'">ÈáëËâ≤Â≠ó</div>
                </div>
                <div class="textA">‰∏äËÅØ</div>
                <input type="text" v-model="h1" class="spInput" maxlength="15">
                <div style="margin:0.5rem 0;"> </div>
                <div class="textA">‰∏ãËÅØ</div>
                <input type="text" v-model="h2" class="spInput" maxlength="15">
                <div style="margin:0.5rem 0;"> </div>
                <div class="textA">Ê©´Êâπ</div>
                <input type="text" v-model="h3" class="spInput" maxlength="7" style="width:70vw;" placeholder="Ê©´ÊâπÂèØÁïôÁ©∫">
                <div style="margin:0.3rem 0;"> </div>
                <div>
                    <div class="btnType2 inBlk" v-on:click="lotStr">Èö®Ê©üÁî¢ÁîüÊò•ËÅØ</div>
                    <div class="btnType2 inBlk" v-on:click="clearFn">Ê∏ÖÈô§</div>
                </div>
                <div style="margin:0.5rem 0;"> </div>
            </div>
            <div>
                <div class="bgST fontST h3CSS" v-show="!!h3" v-bind:class="cssFontColor()">{{h3Display}}</div>
                <div style="margin-top: 0.8rem; display:inline-block; width:100%;">
                    <div style="float:left" class="bgST fontST h2CSS" v-show="!!h1 || !!h2" v-html="leftDisplay" v-bind:class="cssFontColor()"></div>
                    <div style="float:right" class="bgST fontST h2CSS" v-show="!!h1 || !!h2" v-html="rightDisplay" v-bind:class="cssFontColor()"></div>
                </div>
            </div>
            <div class="springKey" style="min-height: 60px;">
                <div class="fLeft">
                    <div class="btnSwitch" v-bind:class="isAppendFuCSS" v-on:click="ap=!ap"><div class="toggle"></div></div>
                </div>
                <div class="fLeft" style="height:26px;">
                    <div class="textA" style="line-height: 1rem; margin-left:0.1rem;">ÈôÑÂä†ÊäΩÁ•ùÁ¶èÔºèÁ¥ÖÂåÖÂäüËÉΩ</div>
                </div>
                <div v-show="ap" style="clear:left;">
                    <div class="textB">‰Ω†ÂèØ‰ª•Ëá™Ë®ÇÂõõÂÄãÁ•ùÁ¶èË©±Ë™ûÔºåÊàñËÄÖÂ°´ÂÖ•Á¥ÖÂåÖÈáëÈ°çÔºåÊàñËÄÖÂ°´ÂÖ•ÊäΩÁçéÁâ©ÂìÅÔºåÊâÄÊúâÈÅ∏È†ÖÊ©üÁéáÂùáÁ≠âÔºåÈôêËº∏ÂÖ•ÂçÅÂ≠ó„ÄÇ</div>
                    <div>
                        <div class="btnType2 inBlk" v-on:click="lotPray">Á•ùÁ¶èÁØÑ‰æã</div>
                        <div class="btnType2 inBlk" v-on:click="lotCash">Á¥ÖÂåÖÁØÑ‰æã</div>
                    </div>
                    <ol style="margin-bottom: 30px;">
                        <li><input type="text" v-model="z1" class="spInput" maxlength="10" style="width:70vw;"></li>
                        <li><input type="text" v-model="z2" class="spInput" maxlength="10" style="width:70vw;"></li>
                        <li><input type="text" v-model="z3" class="spInput" maxlength="10" style="width:70vw;"></li>
                        <li><input type="text" v-model="z4" class="spInput" maxlength="10" style="width:70vw;"></li>
                    </ol>
                </div>
            </div>
            <div class="springKey" style="min-height: 60px; margin-bottom: 50px;">
                <div class="textB">Áî¢Áîü LINE ËÅäÂ§©ÂÆ§ÈªûÊìäÈÄ£ÁµêÂæåÂ∞á‰ªñË§áË£ΩËµ∑‰æÜË≤ºÂà∞ÂÖ∂‰ªñËÅäÂ§©ÂÆ§ÂÜçÈªûÈñãÈÄ£ÁµêÂ∞±ÂèØ‰ª•Êåâ‰∏ã [Ë≤ºÊò•ËÅØ] ÊåâÈàïÂêëËÅäÂ§©ÂÆ§Ë≤º‰∏äËá™Â∑±Ëº∏ÂÖ•ÁöÑÊò•ËÅØ</div>
                <div class="btnType2" v-on:click="gen()">Áî¢ÁîüÈÄ£Áµê</div>
                <div v-show="!!api"><textarea style="width:calc(100vw - 1.3rem); height:2rem; font-size:12px;" readonly>{{api}}</textarea></div>
                <div v-show="!!api" class="btnType2" v-on:click="copyGenFn()">Ë§áË£ΩÈÄ£Áµê</div>
                <div v-show="!!api" class="btnType2" v-on:click="pushDirectly()">Âπ´ËÅäÂ§©ÂÆ§ÈñÄË≤ºÊò•ËÅØ</div>
                <div class="btnType1" v-on:click="closeFn()">ÈóúÈñâ LIFF Êò•ËÅØ APP</div>
            </div>
            <div>
                <div class="textB">Êú¨Á®ãÂºèÁöÑ LINE Â∞àÁî®ÂàÜ‰∫´Á¢º</div>
                <div v-show="!flagShowQRIMG" class="btnType2" v-on:click="flagShowQRIMG=true">È°ØÁ§∫ QR Code</div>
                <div v-show="flagShowQRIMG" v-html="qrcodeIMG" style="margin-bottom:60px;"></div>
            </div>
        </div>`,
        computed: {
            isL2RCSS: function(){
                return (this.L2R) ? '' : 'off';
            },
            isAppendFuCSS: function(){
                return (this.ap) ? '' : 'off';
            },
            h3Display: function(){
                var a = this.h3;
                if(!this.L2R){
                    a = a.split('').reverse().join('');
                }
                return a;
            },
            qrcodeIMG: function(){
                return '<img src="' + qrcodeURL + '" style="width:90%;">';
            },
            leftDisplay: function(){
                var tmpA = (this.L2R) ? this.h1 : this.h2;
                return tmpA.split('').join('<br>');
            },
            rightDisplay: function(){
                var tmpA = (this.L2R) ? this.h2 : this.h1;
                return tmpA.split('').join('<br>');
            }
        },
        data: function(){return {
            flagShowPushRoomBtn: false,
            flagShowQRIMG: false,
            roomMsgJSON: '',
            h1: '', h2: '', h3: '', fc: 'gold',
            z1: '', z2: '', z3: '', z4: '',
            L2R: false,
            ap: false,
            api: '', lotteryURL: ''
        }},
        methods: {
            cssFontColorBtn: function(color){
                return (color==this.fc) ? 'btnType3A' : 'btnType3';
            },
            cssFL2RBtn: function(b){
                return (b==this.L2R) ? 'btnType3A' : 'btnType3';
            },
            cssFontColor:function(){
                return 'color_' + this.fc;
            },
            clearFn: function(){this.h1='';this.h2='';this.h3='';},
            closeFn: function(){liff.closeWindow();},
            copyGenFn: function(){
                this.gen();
                this.copyFn();
            },
            copyFn: function(){
                var el = document.createElement('textarea');
                el.value = this.api;
                document.body.appendChild(el);
                el.select();
                var flgA = document.execCommand('copy');
                document.body.removeChild(el);
                if(!flgA){
                    pmsg.alert('Ë§áË£ΩÂ§±ÊïóÔºÅ');
                }else{
                    pmsg.tip('Ë§áË£ΩÊàêÂäü')
                }
            },
            gen: function(){
                var spOK = (!!this.h1 && !!this.h2);
                var lotOK = (this.ap && !!this.z1 && !!this.z2 && !!this.z3 && !!this.z4);
                var aryParam = [];
                var st = SERVER_URL_PATH + '?ac=1&';

                if(!spOK){ alert('Êò•ËÅØ‰ºº‰πéÊ≤íÊúâÂØ´ÂÆåÂñîÔºåË´ãÂÜçÊ™¢Êü•‰∏ÄÊ¨°'); return false; }
                aryParam.push('h1=' + encodeURIComponent(this.h1));
                aryParam.push('h2=' + encodeURIComponent(this.h2));
                if(!!this.h3) aryParam.push('h3=' + encodeURIComponent(this.h3));
                aryParam.push('fc=' + encodeURIComponent(this.fc));

                if(this.L2R) aryParam.push('L2R=1');

                if(this.ap && !lotOK){ alert('ÊÇ®‰ºº‰πéÂïüÁî®‰∫ÜÊäΩÁ•ùÁ¶èÂäüËÉΩÂçªÊú™Ëº∏ÂÖ•ÂÆåÂõõÂÄãÂÖßÂÆπÔºåË´ãÂÜçÊ™¢Êü•‰∏ÄÊ¨°'); return false;}
                if(this.ap){
                    var lotAryParam = ['z1=' + encodeURIComponent(this.z1), 'z2=' + encodeURIComponent(this.z2), 'z3=' + encodeURIComponent(this.z3), 'z4=' + encodeURIComponent(this.z4)];
                    aryParam.push('z1=' + encodeURIComponent(this.z1));
                    aryParam.push('z2=' + encodeURIComponent(this.z2));
                    aryParam.push('z3=' + encodeURIComponent(this.z3));
                    aryParam.push('z4=' + encodeURIComponent(this.z4));
                    this.lotteryURL = SERVER_URL_PATH + '?ac=2&' + lotAryParam.join('&') + '&dp=' + encodeURIComponent(GB.profile.displayName);
                }

                st += aryParam.join('&');
                this.api = st;
            },
            lotCash: function(){
                this.z1 = '600';this.z2 = '1000';this.z3 = '1200';this.z4 = '2000';
            },
            lotPray: function(){
                this.z1 = 'ÂøÉÊÉ≥‰∫ãÊàê';this.z2 = 'Ë∫´È´îÂÅ•Â∫∑';this.z3 = 'Ë≤°Ê∫êÂª£ÈÄ≤';this.z4 = 'È£õÈªÉÈ®∞ÈÅî';
            },
            lotStr: function(){
                var a = lotteryExample();
                this.h1 = a[0];
                this.h2 = a[1];
                if(a[2]) this.h3 = a[2];
            },
            pushDirectly: function(){
                var lotURL = undefined;
                var lotOK = (this.ap && !!this.z1 && !!this.z2 && !!this.z3 && !!this.z4);
                if(this.ap && lotOK){
                    lotURL = this.lotteryURL;
                }
                this.roomMsgJSON = JSON.stringify(GB.sendRoomAD(this.h1, this.h2, this.h3, this.L2R, this.fc, this.api, lotURL));
            },
            pushRoom: function(){
                this.gen();
                this.pushDirectly();
            }
        },
        mounted: function(){
            GB.app1 = this;
            if(GetP.ac==1){
                this.flagShowPushRoomBtn = true;
                this.h1 = GetP.h1;
                this.h2 = GetP.h2;
                if(GetP.h3) this.h3 = GetP.h3;
                if(GetP.L2R==1) this.L2R = true;
                if(GetP.fc) this.fc = GetP.fc;
                if(GetP.z1) this.z1 = GetP.z1;
                if(GetP.z2) this.z2 = GetP.z2;
                if(GetP.z3) this.z3 = GetP.z3;
                if(GetP.z4) this.z4 = GetP.z4;
                if(GetP.z1 && GetP.z2 && GetP.z3 && GetP.z4) this.ap = true;
            }
        }
    };
    
    var aboutArea = {
        template: '<div>' +
            '<div v-html="kss"></div>' +
        '</div>', 
        data: function(){return {
            kss: '<ul>' +
                '<li>ÁôºË°åÂñÆ‰ΩçÔºö<span style="background-color: #BBB;"><span style="color:blue;">Ê•µ</span><span style="color:#FEFE11;">ÂÖâ</span><span style="color:#005530;">Èß≠</span><span style="color:red;">ÂÆ¢</span></span></li>' +
                '<li>Á®ãÂºèÂêçÁ®±ÔºöLIFF ÂØ´Êò•ËÅØÊäΩÁ•ùÁ¶è</li>' +
                '<li>Âª∫Á´ãÊñπÂºèÔºöÂ°´ÂØ´‰∏ä‰∏ãËÅØÔºåÊ©´ÊâπÂèØÈÅ∏ÔºåÂèØÈôÑÂä†Á•ùÁ¶èÊàñÁ¥ÖÂåÖ</li>' +
                '</ul>'
        }}
    };

    var lotArea = {
        template: `
            <div style="margin-top: 2vw;">
                <div>Áï∂‰Ω†Ê∫ñÂÇôÂ•Ω‰∫ÜÔºåÂ∞±Êåâ‰∏ãÈù¢ÁöÑÊåâÈàïÔºÅ</div>
                <div class="btnType5" v-on:click="open" v-show="!afterVin">ÊâìÈñãÁ•ùÁ¶èÔºèÁ¥ÖÂåÖ</div>
                <div style="visibility:hidden;"><textarea>{{roomMsgJSON}}</textarea></div>
                <div style="margin: 5vw;font-size:1rem;" v-show="afterVin">
                    <div class="fcopAni">ÈñãÁçé‰∏≠...</div>
                </div>
                <div class="btnType1" v-on:click="closeFn()" v-show="afterVin">ÈóúÈñâ LIFF Êò•ËÅØ APP</div>
            </div>
        `,
        computed: {
            season: function(){
                
            }
        }, 
        data: function(){return {
            afterVin: false,
            kcc: 1,
            roomMsgJSON: '',
            dp: '',
            z1: '', z2: '', z3: '', z4: ''
        }},
        methods: {
            open: function(){
                var retStr = '', ascTotal = 0;
                var uid = GB.profile.userId;
                var aryUID = uid.split('');
                aryUID.map(function(w){
                    ascTotal += w.charCodeAt();
                })
                var mtop = (typeof(this.dp)=='string' && this.dp!='') ? this.dp.charCodeAt() : 0;
                var intZ1 = (typeof(this.z1)=='string' && this.z1!='') ? this.z1.charCodeAt() : 0;
                var intZ2 = (typeof(this.z2)=='string' && this.z2!='') ? this.z2.charCodeAt() : 0;
                var intZ3 = (typeof(this.z3)=='string' && this.z3!='') ? this.z3.charCodeAt() : 0;
                var intZ4 = (typeof(this.z4)=='string' && this.z4!='') ? this.z4.charCodeAt() : 0;
                var idx = (mtop + ascTotal + intZ1 + intZ2 + intZ3 + intZ4) % 4;
                alert(idx);
                var aryZ = [this.z1, this.z2, this.z3, this.z4];
                retStr = aryZ[idx];
                if(liff.sendMessages){
                    var aryM = [];
                    if(this.dp){
                        aryM.push({
                            "type": "box", "layout": "horizontal", "backgroundColor": "#cb111f", "spacing": "sm",
                            "contents": [{
                                "type": "text",
                                "text": this.dp,
                                "wrap": true, "color": "#efd0cb", "align": "center", "size": "xl",
                                "weight": "bold"
                            }]
                        });
                        aryM.push({
                            "type": "box", "layout": "horizontal", "spacing": "sm",
                            "contents": [{
                                "type": "text",
                                "text": "Ë¥àÈÄÅÁöÑÁ•ùÁ¶èÔºèÁ¥ÖÂåÖ",
                                "wrap": true, "color": "#e8a730", "align": "center", "margin": "md",
                                "size": "md"
                            }]
                        });
                    }
                    var userImage = (GB.profile.pictureUrl) ? GB.profile.pictureUrl : 'https://i.imgur.com/iARuNO0.jpg';
                    var userName = (GB.profile.displayName) ? GB.profile.displayName : '‰∏ç‰ø±ÂêçËÄÖ';
                    aryM.push({
                        "type": "box", "layout": "baseline", "backgroundColor": "#cb111f", "margin": "md",
                        "contents": [{
                            "type": "icon", "url": userImage, "size": "3xl"
                        }, {
                            "type": "text", "text": userName, "weight": "bold", "color": "#efd0cb", "size": "xl"
                        }]
                    })
                    aryM.push({
                        "type": "box", "layout": "horizontal", "spacing": "sm",
                        "contents": [{
                            "type": "text", "text": "ÊäΩÂà∞‰∫Ü", "color": "#e8a730", "align": "center", "size": "md"
                        }]
                    });
                    aryM.push({
                        "type": "box", "layout": "horizontal", "backgroundColor": "#cc8a40", "margin": "md",
                        "contents": [{
                            "type": "text", "text": retStr, "color": "#fefefe",
                            "wrap": true, "align": "center", "size": "xxl"
                        }]
                    });
                    
                    var msgObj = {
                        "type": "bubble",
                        "styles": { "footer": { "separator": true } },
                        "body": {
                            "type": "box",
                            "layout": "vertical",
                            "backgroundColor": "#cb111f",
                            "contents": aryM
                        }
                    }
                    var a = liff.sendMessages([{
                        type: "flex",
                        altText: this.dp + 'Ë¥à‰∫à' + GB.profile.displayName + 'ÁöÑÁ•ùÁ¶èÔºèÁ¥ÖÂåÖ',
                        contents: msgObj
                    }]).then(function(e){
                    });
                    this.roomMsgJSON = JSON.stringify(msgObj);
                    this.afterVin = true;
                }else{
                    pmsg.tip('ÁôºÁîüÈåØË™§ÔºåÁÑ°Ê≥ïÈñãÁçé')
                }
                setTimeout(function(){
                    liff.closeWindow();
                },2000)
            }
        },
        mounted: function(){
            GB.app2 = this;
            if(GetP.ac==2){
                if(GetP.z1) this.z1 = GetP.z1;
                if(GetP.z2) this.z2 = GetP.z2;
                if(GetP.z3) this.z3 = GetP.z3;
                if(GetP.z4) this.z4 = GetP.z4;
                this.dp = GetP.dp || '';
            }
        }
    }

    var mainRoute = new VueRouter({
            routes: [
                {path: '/', component: indexArea},
                {path: '/lot', component: lotArea},
                {path: '/about', name: 'about', component: aboutArea},
                {path: '*', component: indexArea}
            ]
    });

    var tpl = Vue.compile('<div id="main">' + 
            '<router-view></router-view>' +
            '<div id="statusBar"></div>' +
        '</div>');

    var main = new Vue({
            router: mainRoute,
            render: tpl.render,
            el: '#main'
    });

    if(GetP.ac==2){
        location.hash = '#/lot'
    }
}

var hand = {};
function loginFn(){
    hand.data = data;
    var initThis = this;
    var r = arguments;
    liff.getProfile(function(pFile){
        hand.profile = pFile;
        if(typeof(successFn)=='function'){
            successFn.apply(initThis, r);
        }
    })
}
function initFn(){
    if(/localhost|^file/.test(location.href) || location.hash=='#/do' || /docc/.test(location.search)){
        liff.sendMessages = function(){return {then:function(){}} }
            initVue();
        return false;
    }
    // liff.init({liffId:'1653659221-nJx5AVL1'}, function(data){//V2
    liff.init(function(data){//V1
        if(!liff.getOS) liff.getOS = function(){return 'android'; }
        if(!liff.isLoggedIn) liff.isLoggedIn = function(){return true; }
        hand.isInWeb = !!(liff.getOS()=='web');
        if(hand.isInWeb && !liff.isLoggedIn()){
            liff.login({
                redirectUri: location.href
            });
        }else{
            liff.getProfile().then(function(e){
                GB.profile = e;
                initVue();
            }).catch(function(e){
                alert('Êä±Ê≠âÔºåÂõ†ÊÇ®ÁöÑÊâãÊ©ü‰∏≠ LIFF APP ÈÅã‰Ωú‰πã LINE ÁÑ°Ê≥ïÂèñÂæóÁî®Êà∂Ë≥áË®äÂõ†Ê≠§ÁÑ°Ê≥ï‰ΩøÁî®Ê≠§ÂäüËÉΩ„ÄÇ')
            })
        }
    }, function(){
        if(typeof(errorFn)=='function') errorFn.apply(this, arguments);
    })
}
</script>

</head>
<body onload="initFn()">
    <div id="main"></div>
    <div id="pop"></div>
</body>
</html>